#paczki repo abc

    - include_vars: v.yml

    - name: unhold paczek xkasnet'a
      shell: sudo apt-mark unhold $(apt-mark showhold)
      ignore_errors: yes

    - name:  Instalacja paczek kasnet/xkasnet ABC - QUANT
      apt:
        name:
$ANSIBLE_VAULT;1.1;AES256
32313261366565363034613430666266643538303564333339393934623834343637623863316662
6636623137326462303038633931333739646161613062660a313730393163393239353661343136
37643633306330643665303665393064363562333738346534313830616363613231366237643964
3334376162636161310a326337656636323964393037656464393038343363393736333262383231
62626136613665643661363234306136643361333164396566393536316634613861303434636461
64633036396363646331346563363532323161346364633137383864306330346630643163313530
36363862663933643338646632316266623236393433383939633366386664343961656361346634
61323836323933636266306334303736636238326665326166346538636264653738646132386437
32376462663163353939636563333465303639653435643536616237336661656364313934613033
34663332306534663662636266643838646461353564373733326265373464393131653031623266
35663137383336306230613465333861326335623432343434653638623765336361343137366532
65633033323236653964656461393438313263326663306662343536636336303064356533376335
66343336646537363663613434336639323862303330313836373436663566376366623630643463
30353362363331363261323435653434303637343333356535363761326138316565643230623864
31346161373265303237643932323635343964613135613364623266326333623164633434306430
33663864383733313435353036306165313361643237313363303732363735613563333862663431
38303739616230346565303465316137313065376362653663393261633966343531393966363232
35656661336363613734643238336562613936616338373933363930366330653164373562636166
34303135353032356433333935396466386130643233333339383865356435366139636535616262
65666662333335303263306237326133343937383032623436333036626434383331313033663836
34356532613431646332613865326337333464356465333066366132353834636439636265336133
32333366396134386363656631373938343834306561623035343263383162323966396535376164
31306565643637306434396361616462653766373561626331366335633738376663613062303635
64323134663734326363333236643537663435333030323137316336623632313738336366373161
66633932356237363430303333373131636564323366323265333037343461653234616137646134
62323866396333373236313161393961663639343964633531333538663864396436633564386264
64646563646364333338636636333838653739376565643337376234646264643762366462396635
62666132663638623165363565313265636234306334323333363730323062326366626161363764
37643563313537386638326639383538666132336131316430623966353833616433616333373561
32336133393764643330306363336435613033343734366630633062656133356430626662646165
33383130303363353563313763303166346238313862363238393864393638386235623437363561
35623862343431303163643264333731333831663838333436346561363737616266643338666637
31393165343238306532623665363039316439646232356137316532643438666535

        state: present
        force: yes
        update_cache: yes
      when: ansible_product_name == 'PT3200'

    - name:  Instalacja paczek kasnet/xkasnet ABC - SURFACE
      apt:
        name:
          - xkasnet-client-2.2.18=2.2.18r202302241432~bionic-1
          - xkasnet-client-ec-2.2.18=2.2.18r202302241432~bionic-1
          - xkasnet-libnative-jni-2.2.18=2.2.18r202302241432~bionic-1
          - kasnet-libwaga-2.1.337=2.1.337r202302011414~bionic-1
          - kasnet-server-2.1.337=2.1.337r202302011414~bionic-1
          - kasnet-src-2.1.337=2.1.337r202302011414~bionic-1
          - kasnet-config-2.1.337=2.1.337r202302011414~bionic-1
          - kasnet-tools-2.1.337=2.1.337r202302011414~bionic-1
          - kasnet-monitor-2.1.337=2.1.337r202302011414~bionic-1
        state: present
        force: yes
        update_cache: yes
      when: ansible_product_name == 'Surface Go'

    - name: Sprawdzam czy jest config xkasnet'a
      stat:
        path: '/{{ dk }}/CONFIG'
      register: stat_result

    - name: Tworze config kasy - SURFACE new layout
      ansible.builtin.lineinfile:
        path: '/{{ dk }}/CONFIG'
        line: kasa.config-1700x1200-ecabc-new-layout
        create: yes
      when: ansible_product_name == 'Surface Go' and not stat_result.stat.exists

    - name: Zmiana rozdzielczosci - Surface
      replace:
        path: '/{{ dk }}/CONFIG'
        regexp: '{{ item.regexp }}'
        replace: '{{ item.line }}'
        backup: yes
      with_items:
        - { regexp: '^kasa.*$', line: 'kasa.config-1700x1200-ecabc-new-layout' }
      when: ansible_product_name == 'Surface Go' and stat_result.stat.exists

      #quant

    - name: Zmiana rozdzielczosci - Quant
      replace:
        path: '/{{ dx }}/xkasnet-launcher'
        regexp: '{{ item.regexp }}'
        replace: '{{ item.line }}'
        backup: yes
      with_items:
        - { regexp: 'kasa.*$', line: 'kasa.config-964x768_85dpi-ecabc' }
      when: ansible_product_name == 'PT3200'

    - name: Usuwam .cache
      file:
        state: absent
        path: '/{{ dx }}/.cache'
      ignore_errors: yes
