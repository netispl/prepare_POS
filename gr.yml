#paczki repo groszek

    - include_vars: v.yml

    - name: Instalacja paczek kasnet/xkasnet Groszek 
      apt:
        name: '{{ item }}'
        state: present
        force: yes
        update_cache: yes
      loop:
        - xkasnet-client-2.2.15=2.2.15r202009231359~bionic-1
        - xkasnet-client-ec-2.2.15=2.2.15r202009231359~bionic-1
        - kasnet-libwaga-2.1.326=2.1.326r202008261122~bionic-1
        - kasnet-server-2.1.326=2.1.326r202008261122~bionic-1
        - kasnet-src-2.1.326=2.1.326r202008261122~bionic-1

    - name: Pobieram paczke dla groszek
      get_url:
        url: ftp://{{fuser}}:{{fpassword}}@{{fhost}}/{{dftp}}/groszek/groszek2.tgz
        dest: /tmp/

    - name: Rozpakowuje paczke dla groszek
      unarchive:
        src: '/tmp/groszek2.tgz'
        dest: '/'

    - name: Zmiana rozdzielczosci groszek - Surface
      replace:
        path: '/{{ dx }}/xkasnet-launcher'
        regexp: '{{ item.regexp }}'
        replace: '{{ item.line }}'
        backup: yes
      with_items:
        - { regexp: 'kasa.*$', line: 'kasa.config-1700x1200-ecgroszek' }
      when: ansible_product_name == 'Surface Go'
 
    - name: Usuwam .cache 
      file:
        state: absent
        path: '/{{ dx }}/.cache'

      #quant 
      
    - name: Zmiana rozdzielczosci groszek - Quant
      replace:
        path: '/{{ dx }}/xkasnet-launcher'
        regexp: '{{ item.regexp }}'
        replace: '{{ item.line }}'
        backup: yes
      with_items:
        - { regexp: 'kasa.*$', line: 'kasa.config-964x768_85dpi-ecgroszek' }
      when: ansible_product_name == 'PT3200'


